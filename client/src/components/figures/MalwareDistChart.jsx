import React from "react";
import { Card } from "react-bootstrap";
import "./MalwareDistChart.css"; // Import custom CSS for styling

// eslint-disable-next-line react/prop-types
export default function MalwareDistChart({ data, loading }) {
  const TOTAL = data?.map((item) => item.value).reduce((a, b) => a + b, 0);

  // Calculate the percentage for each data item
  const dataWithPercentages = data.map((item) => ({
    ...item,
    percentage: ((item.value / TOTAL) * 100).toFixed(0),
  }));

  return (
    <Card className="mb-3" style={{ backgroundColor: "white" }}>
      <Card.Body>
        <Card.Title className="font-weight-bold">
          Malware Distribution
        </Card.Title>
        {loading ? (
          <p>Loading...</p>
        ) : (
          <div className="pie-chart-container">
            {dataWithPercentages.map((item, index) => (
              <div
                key={item.label}
                className="pie-slice"
                style={{
                  backgroundColor: item.color, // Use the color property from your data
                  flexBasis: `${item.percentage}%`,
                }}
              >
                <span className="slice-label">
                  {item.label}: {item.percentage}%
                </span>
              </div>
            ))}
          </div>
        )}
      </Card.Body>
    </Card>
  );
}

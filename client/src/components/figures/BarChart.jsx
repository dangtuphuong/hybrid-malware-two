import React from "react";
import { Card } from "react-bootstrap"; // Use Card for background
import {
  RadarChart,
  PolarGrid,
  PolarAngleAxis,
  PolarRadiusAxis,
  Radar,
  Tooltip,
  ResponsiveContainer,
} from "recharts"; // Import Recharts components
import "./Chart.css"; // Import the CSS file for styling

// eslint-disable-next-line react/prop-types
export default function CustomRadarChart({ label, data, loading }) {
  // Transform data into the format expected by RadarChart
  const formattedData = Object.keys(data).map((key) => ({
    name: key,
    value: data[key],
  }));

  return (
    <Card
      className="mb-3"
      style={{
        padding: "20px",
        backgroundColor: "#333", // Set the card background to dark
        border: "none",
        borderRadius: "0.5rem",
        boxShadow: "0 1px 3px rgba(0, 0, 0, 0.5)", // Darker shadow for card
        maxWidth: "1640px",
        overflow: "hidden",
      }}
    >
      <Card.Body>
        <Card.Title
          className="font-weight-bold"
          style={{ marginBottom: "20px", color: "white" }} // Title color set to white
        >
          {label}
        </Card.Title>
        {loading ? (
          <p style={{ color: "white" }}>Loading...</p> // Loading text in white
        ) : (
          <div
            className="chart-container"
            style={{ width: "100%", display: "flex", flexDirection: "column" }}
          >
            <ResponsiveContainer width="100%" height={300}>
              <RadarChart
                data={formattedData}
                margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
              >
                <PolarGrid stroke="#555" /> {/* Darker grid lines */}
                <PolarAngleAxis dataKey="name" stroke="white" />{" "}
                {/* Angles for each axis */}
                <PolarRadiusAxis stroke="white" />
                <Radar
                  name="Data"
                  dataKey="value"
                  stroke="#8884d8" // Line color for the radar
                  fill="#8884d8"
                  fillOpacity={0.6}
                />
                <Tooltip
                  contentStyle={{ backgroundColor: "#555", color: "white" }}
                />
              </RadarChart>
            </ResponsiveContainer>
            <div
              className="bar-slice-labels"
              style={{
                marginTop: "10px", // Space between the chart and labels
                display: "flex", // Use flexbox for horizontal display
                flexWrap: "wrap", // Allow labels to wrap to the next line if needed
                justifyContent: "space-between", // Space items evenly
                color: "white", // Set text color to white for labels
                overflow: "hidden", // Prevent labels from overflowing
                maxHeight: "50px", // Set a max height for labels area
              }}
            >
              {formattedData.map((item, index) => (
                <div
                  key={index}
                  className="slice-label"
                  style={{
                    color: "#8884d8", // Set label color to match the radar color
                    fontWeight: "bold", // Bold labels
                    margin: "0 5px", // Space between labels
                    whiteSpace: "nowrap", // Prevent label text from wrapping
                  }}
                >
                  {item.name}: {item.value} {/* Show value in labels */}
                </div>
              ))}
            </div>
          </div>
        )}
      </Card.Body>
    </Card>
  );
}

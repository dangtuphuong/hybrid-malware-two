import React from "react";
import { Card } from "react-bootstrap"; // Use Card for background
import {
  BarChart as RechartsBarChart,
  Bar,
  XAxis,
  YAxis,
  Tooltip,
  CartesianGrid,
} from "recharts"; // Import Recharts components
import "./Chart.css"; // Import the CSS file for styling

// eslint-disable-next-line react/prop-types
export default function CustomBarChart({ label, data, loading }) {
  // Transform data into the format expected by Recharts
  const formattedData = Object.keys(data).map((key) => ({
    name: key,
    value: data[key],
  }));

  return (
    <Card className="mb-3" style={{ backgroundColor: "white" }}>
      <Card.Body>
        <Card.Title className="font-weight-bold">{label}</Card.Title>
        {loading ? (
          <p>Loading...</p> // Show loading text if loading
        ) : (
          <div className="chart-container">
            <RechartsBarChart
              width={500}
              height={300}
              data={formattedData}
              margin={{ top: 20, right: 30, left: 20, bottom: 5 }}
            >
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey="name" />
              <YAxis />
              <Tooltip />
              <Bar dataKey="value" fill="#007bff" />{" "}
              {/* Bootstrap primary color */}
            </RechartsBarChart>
          </div>
        )}
      </Card.Body>
    </Card>
  );
}
